@model Preschool.Models.Child


@{
    ViewData["Title"] = "ChildPage";
}

<h1>Child Page</h1>

@*subscirption history*@

@*<div class="row">
    @await Component.InvokeAsync("ChildSubscriptionsHistory" , new {id = Model.Id})
    <br />
</div>*@


@*@{
    var childName = Model.FirstName + " " + Model.LastName;
}*@


<h1><span class="TitleLine" id="childName">@Model.FirstName  @Model.LastName </span>Subscriptions</h1>
<br />

<div class="row">
    @foreach (var subscription in Model.Subscriptions.ToList())
    {
        <div class="col-md-4">
            @if (subscription.IsActive == true)
            {

                <div class="subCardBody card-body" style=" border: 5px double #12b800;">
                    <div id="@subscription.Id.ToString()">
                        <h4 class="card-title">Subscription Type: <b>@subscription.SubscriptionType.Name</b></h4>
                        <p class="card-text">Starts at: @subscription.CreatedAt.ToString("yyyy/MM/dd")</p>
                        <p class="card-text">Expires at: @subscription.ExpireAt.ToString("yyyy/MM/dd")</p>
                        <p class="card-text">Price: @subscription.SubscriptionType.Price QR </p>
                        <p class="card-text">Status: <span style="color:#12b800;"><b>Active</b></span></p>
                    </div>
                    <p class="card-text">
                        <button onclick="printBill(@subscription.Id.ToString())">Print Bill</button>
                    </p>
                </div>
            }
            else
            {
                <div class="subCardBody card-body" style=" border: 5px double #ff0000;;">
                    <div id="@subscription.Id.ToString()">
                        <h4 class="card-title" id="subTypeName">Subscription Type: <b>@subscription.SubscriptionType.Name</b></h4>
                        <p class="card-text" id="createdAt">Created at: @subscription.CreatedAt.ToString("yyyy/MM/dd")</p>
                        <p class="card-text" id="expiresAt">Expires at: @subscription.ExpireAt.ToString("yyyy/MM/dd")</p>
                        <p class="card-text" id="price">Price: @subscription.SubscriptionType.Price QR</p>
                        <p class="card-text" id="subStatus">Status: <span style="color:#ff0000;"><b>Expired</b></span></p>
                    </div>
                    <p class="card-text">
                        <button onclick="printBill(@subscription.Id)">Print Bill</button>
                    </p>
                </div>

            }

        </div>

    }
</div>
<br />




<!-- Modal -->
<div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <img id="modalImage" src="" style="max-width: 100%; max-height: 80vh;">
            </div>
        </div>
    </div>
</div>
<br />
<h1>Child Documents </h1>
<div class="row">
    @foreach (var image in Model.DocumentsImage.Select(i => i.ImageFile))
    {
        <div class="col-lg-4">
            <a href="#" data-toggle="modal" data-target="#imageModal" onclick="showImage('@image')">
                <div class="card" style="width: 18rem;">
                    <img class="card-img-top" height="350" src="~/DocumentsCopies/@image" alt="@image"/>
                </div>
            </a>
        </div>
    }
</div>



@*Attendnec schema*@





@section Scripts {
    <script>
        function showImage(imageFile) {
            var baseUrl = '@Url.Content("~/")'; // Razor syntax to get the application's root path
            var modalImage = document.getElementById('modalImage');
            modalImage.src = baseUrl + 'DocumentsCopies/' + imageFile;
        }

    </script>
    

}